.\" Man page for tea-cli
.\" Generated for libtea v0.2.0
.TH TEA-CLI 1 "2026-02-27" "libtea 0.2.0" "TEA CLI Manual"
.SH NAME
tea-cli \- command-line client for the Transparency Exchange API (TEA)
.SH SYNOPSIS
.B tea-cli
[\fIGLOBAL OPTIONS\fR]
\fICOMMAND\fR
[\fICOMMAND OPTIONS\fR]
.SH DESCRIPTION
.B tea-cli
is a command-line interface for the Transparency Exchange API (TEA)
v0.3.0-beta.2.
It discovers, searches, and retrieves software transparency artifacts
(SBOMs, VEX, build metadata) from TEA-compliant servers.
.PP
Output is rich-formatted by default (tables, panels) for interactive use.
Use \fB\-\-json\fR for machine-readable JSON output suitable for piping.
.PP
.B tea-cli
is part of the
.B libtea
Python library, maintained by sbomify.
.SH GLOBAL OPTIONS
.TP
\fB\-\-json\fR
Output raw JSON instead of rich-formatted tables.
.TP
\fB\-\-debug\fR, \fB\-d\fR
Show debug output (HTTP requests, timing) on stderr.
.TP
\fB\-\-version\fR
Show version and exit.
.TP
\fB\-\-help\fR
Show help message and exit.
.SH CONNECTION OPTIONS
Every command accepts the following options for server selection and authentication.
.TP
\fB\-\-base\-url\fR \fIURL\fR
TEA server base URL (e.g. \fIhttps://trust.sbomify.com/tea/v0.3.0-beta.2\fR).
Can also be set via the \fBTEA_BASE_URL\fR environment variable.
Mutually exclusive with \fB\-\-domain\fR.
.TP
\fB\-\-domain\fR \fIDOMAIN\fR
Discover server from the domain's \fI.well-known/tea\fR endpoint.
The domain can also be auto-extracted from a TEI URN argument.
.TP
\fB\-\-token\fR \fITOKEN\fR
Bearer token for authentication. Prefer the \fBTEA_TOKEN\fR environment variable
to avoid exposing the token in shell history.
.TP
\fB\-\-auth\fR \fIUSER:PASSWORD\fR
HTTP basic authentication credentials. Prefer the \fBTEA_AUTH\fR environment
variable to avoid exposing credentials in shell history.
Mutually exclusive with \fB\-\-token\fR.
.TP
\fB\-\-client\-cert\fR \fIPATH\fR
Path to client certificate for mutual TLS (mTLS).
Must be used with \fB\-\-client\-key\fR.
.TP
\fB\-\-client\-key\fR \fIPATH\fR
Path to client private key for mTLS.
Must be used with \fB\-\-client\-cert\fR.
.TP
\fB\-\-ca\-bundle\fR \fIPATH\fR
Path to CA bundle for mTLS server verification.
.TP
\fB\-\-timeout\fR \fISECONDS\fR
Request timeout in seconds (default: 30).
.TP
\fB\-\-use\-http\fR
Use HTTP instead of HTTPS for .well-known/tea discovery.
Intended for local development only.
.TP
\fB\-\-port\fR \fIPORT\fR
Port for well-known resolution (overrides the default for the scheme).
.SH COMMANDS
.SS discover
Resolve a TEI URN to product release UUID(s).
.PP
.B tea-cli discover
[\fB\-\-quiet\fR | \fB\-q\fR]
\fITEI\fR
.TP
\fITEI\fR
A TEI URN (e.g. \fIurn:tei:purl:trust.sbomify.com:pkg:github/sbomify/sbomify\fR).
The domain is auto-extracted for server discovery when \fB\-\-base\-url\fR and
\fB\-\-domain\fR are omitted.
.TP
\fB\-\-quiet\fR, \fB\-q\fR
Output only UUIDs, one per line. Useful for scripting.
.SS inspect
Full flow: TEI \(-> discovery \(-> product releases \(-> components \(-> artifacts.
Resolves a TEI and fetches the full object graph in one shot.
.PP
.B tea-cli inspect
[\fB\-\-max\-components\fR \fIN\fR]
\fITEI\fR
.TP
\fB\-\-max\-components\fR \fIN\fR
Maximum number of components to fetch per release (default: 50).
.SS search-products
Search for products by identifier.
.PP
.B tea-cli search-products
\fB\-\-id\-type\fR \fITYPE\fR
\fB\-\-id\-value\fR \fIVALUE\fR
[\fB\-\-page\-offset\fR \fIN\fR]
[\fB\-\-page\-size\fR \fIN\fR]
.TP
\fB\-\-id\-type\fR \fITYPE\fR
Identifier type: CPE, TEI, or PURL.
.TP
\fB\-\-id\-value\fR \fIVALUE\fR
Identifier value to search for.
.TP
\fB\-\-page\-offset\fR \fIN\fR
Page offset for pagination (default: 0).
.TP
\fB\-\-page\-size\fR \fIN\fR
Page size for pagination (default: 100).
.SS search-releases
Search for product releases by identifier.
.PP
.B tea-cli search-releases
\fB\-\-id\-type\fR \fITYPE\fR
\fB\-\-id\-value\fR \fIVALUE\fR
[\fB\-\-page\-offset\fR \fIN\fR]
[\fB\-\-page\-size\fR \fIN\fR]
.PP
Options are the same as \fBsearch-products\fR.
.SS get-product
Get a product by UUID.
.PP
.B tea-cli get-product
\fIUUID\fR
.SS get-product-releases
List releases for a product UUID.
.PP
.B tea-cli get-product-releases
\fIUUID\fR
[\fB\-\-page\-offset\fR \fIN\fR]
[\fB\-\-page\-size\fR \fIN\fR]
.SS get-release
Get a product or component release by UUID.
.PP
.B tea-cli get-release
[\fB\-\-component\fR]
\fIUUID\fR
.TP
\fB\-\-component\fR
Get a component release instead of a product release.
.SS get-component
Get a component by UUID.
.PP
.B tea-cli get-component
\fIUUID\fR
.SS get-component-releases
List releases for a component UUID.
.PP
.B tea-cli get-component-releases
\fIUUID\fR
.SS get-collection
Get a collection (latest or by version).
.PP
.B tea-cli get-collection
[\fB\-\-version\fR \fIN\fR]
[\fB\-\-component\fR]
\fIUUID\fR
.TP
\fB\-\-version\fR \fIN\fR
Collection version number. If omitted, returns the latest collection.
.TP
\fB\-\-component\fR
Get from component release instead of product release.
.SS list-collections
List all collection versions for a release UUID.
.PP
.B tea-cli list-collections
[\fB\-\-component\fR]
\fIUUID\fR
.TP
\fB\-\-component\fR
List collections for a component release instead of a product release.
.SS get-artifact
Get artifact metadata by UUID.
.PP
.B tea-cli get-artifact
\fIUUID\fR
.SS download
Download an artifact file with optional checksum verification.
.PP
.B tea-cli download
\fIURL\fR
\fIDEST\fR
[\fB\-\-checksum\fR \fIALG:VALUE\fR]...
[\fB\-\-max\-download\-bytes\fR \fIN\fR]
.TP
\fIURL\fR
Artifact download URL.
.TP
\fIDEST\fR
Local file path to save the downloaded artifact.
.TP
\fB\-\-checksum\fR \fIALG:VALUE\fR
Checksum to verify, as \fIALGORITHM:HEX_VALUE\fR.
Can be specified multiple times. Supported algorithms:
MD5, SHA-1, SHA-256, SHA-384, SHA-512, SHA3-256, SHA3-384, SHA3-512,
BLAKE2b-256, BLAKE2b-384, BLAKE2b-512.
.TP
\fB\-\-max\-download\-bytes\fR \fIN\fR
Maximum download size in bytes. The download is aborted if the
response exceeds this limit.
.SS get-cle
Get Common Lifecycle Enumeration (CLE) events for an entity.
.PP
.B tea-cli get-cle
[\fB\-\-entity\fR \fITYPE\fR]
\fIUUID\fR
.TP
\fB\-\-entity\fR \fITYPE\fR
Entity type: \fBproduct\fR, \fBproduct-release\fR (default),
\fBcomponent\fR, or \fBcomponent-release\fR.
.SH ENVIRONMENT
.TP
\fBTEA_BASE_URL\fR
TEA server base URL. Equivalent to \fB\-\-base\-url\fR.
.TP
\fBTEA_TOKEN\fR
Bearer token. Equivalent to \fB\-\-token\fR. Preferred over the command-line
flag to avoid exposing the token in shell history.
.TP
\fBTEA_AUTH\fR
Basic auth credentials as \fIUSER:PASSWORD\fR. Equivalent to \fB\-\-auth\fR.
.SH EXAMPLES
Discover sbomify product releases:
.PP
.RS
.nf
tea-cli discover "urn:tei:purl:trust.sbomify.com:pkg:github/sbomify/sbomify"
.fi
.RE
.PP
Full inspection with JSON output:
.PP
.RS
.nf
tea-cli --json inspect "urn:tei:purl:trust.sbomify.com:pkg:github/sbomify/sbomify"
.fi
.RE
.PP
Search for a product by PURL:
.PP
.RS
.nf
tea-cli search-products \\
    --id-type PURL \\
    --id-value "pkg:github/sbomify/sbomify-1" \\
    --domain trust.sbomify.com
.fi
.RE
.PP
Get lifecycle events for a product release:
.PP
.RS
.nf
tea-cli get-cle --entity product-release <uuid> \\
    --domain trust.sbomify.com
.fi
.RE
.PP
Download an artifact with checksum verification:
.PP
.RS
.nf
tea-cli download "https://cdn.example.com/sbom.json" ./sbom.json \\
    --checksum "SHA-256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855" \\
    --domain trust.sbomify.com
.fi
.RE
.PP
Pipe UUIDs to another tool:
.PP
.RS
.nf
tea-cli discover -q "urn:tei:purl:trust.sbomify.com:pkg:github/sbomify/sbomify" | \\
    xargs -I {} tea-cli --json get-release {} --domain trust.sbomify.com
.fi
.RE
.PP
Using environment variables to avoid repeating credentials:
.PP
.RS
.nf
export TEA_TOKEN="your-bearer-token"
export TEA_BASE_URL="https://trust.sbomify.com/tea/v0.3.0-beta.2"
tea-cli discover "urn:tei:purl:trust.sbomify.com:pkg:github/sbomify/sbomify"
tea-cli get-product <product-uuid>
.fi
.RE
.PP
Mutual TLS authentication:
.PP
.RS
.nf
tea-cli get-product <uuid> \\
    --domain trust.sbomify.com \\
    --client-cert client.pem \\
    --client-key client-key.pem \\
    --ca-bundle ca-bundle.pem
.fi
.RE
.SH AUTHENTICATION
.B tea-cli
supports three authentication methods, all mutually exclusive:
.PP
.B Bearer token
(most common): Pass via \fB\-\-token\fR or \fBTEA_TOKEN\fR. Requires HTTPS.
The token is never sent to artifact download URLs (CDNs) \(em only to the
TEA API server.
.PP
.B HTTP basic auth:
Pass via \fB\-\-auth USER:PASSWORD\fR or \fBTEA_AUTH\fR. Requires HTTPS.
.PP
.B Mutual TLS (mTLS):
Pass certificate and key via \fB\-\-client\-cert\fR and \fB\-\-client\-key\fR.
Optionally provide a CA bundle with \fB\-\-ca\-bundle\fR.
.PP
Using credentials over plaintext HTTP raises an error.
Use \fB\-\-use\-http\fR only for unauthenticated local development.
.SH EXIT STATUS
.TP
0
Success.
.TP
1
Error (network failure, authentication error, not found, invalid input, etc.).
The error message is printed to stderr.
.SH SEE ALSO
.BR libtea (3),
.UR https://transparency.exchange/
Transparency Exchange API
.UE ,
.UR https://github.com/sbomify/py-libtea
py-libtea on GitHub
.UE ,
.UR https://github.com/CycloneDX/transparency-exchange-api
TEA specification
.UE
.SH AUTHORS
sbomify <hello@sbomify.com>
.SH LICENSE
Apache License, Version 2.0
